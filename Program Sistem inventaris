import csv

persediaan = {
    'Air mineral': {'stok': 100, 'harga': 6000},
    'Sereal': {'stok': 50, 'harga': 25000},
    'Vitamin': {'stok': 200, 'harga': 30000},
}

def tambah_persediaan(nama_produk, jumlah):
    if nama_produk in persediaan:
        persediaan[nama_produk]['stok'] += jumlah
        print(f"stok {nama_produk} berhasil ditambah sebanyak {jumlah}.")
    else:
        print("Barang tidak ditemukan.")

def kurangi_persediaan(nama_produk, jumlah):
    if nama_produk in persediaan:
        if persediaan[nama_produk]['stok'] >= jumlah:
            persediaan[nama_produk]['stok'] -= jumlah
            print(f"stok {nama_produk} berhasil dikurangi sebanyak {jumlah}.")
        else:
            print(f"stok {nama_produk} tidak cukup.")
    else:
        print("Barang tidak ditemukan.")

def cek_persediaan_minimum():
    for nama_produk, data in persediaan.items():
        if data['stok'] < 10: 
            print(f"Peringatan: stok {nama_produk} rendah. Hanya tinggal {data['stok']}.")

def hitung_total_nilai():
    total_nilai = 0
    for data in persediaan.values():
        total_nilai += data['stok'] * data['harga']
    print(f"Total nilai produk dalam inventaris: Rp {total_nilai}")

daftar_penjualan = []

def tambah_penjualan(nama_produk, jumlah):
    if nama_produk in persediaan and persediaan[nama_produk]['stok'] >= jumlah:
        persediaan[nama_produk]['stok'] -= jumlah
        daftar_penjualan.append({'produk': nama_produk, 'jumlah': jumlah, 'total_harga': jumlah * persediaan[nama_produk]['harga']})
        print(f"Penjualan {jumlah} {nama_produk} tercatat.")
    else:
        print("stok tidak cukup atau produk tidak ditemukan.")

def simpan_laporapenjualan():
    with open('Laporan_daftar_penjualan.csv', mode='w', newline='') as file:
        writer = csv.DictWriter(file, fieldnames=['produk', 'jumlah', 'total_harga'])
        writer.writeheader()
        for transaksi in daftar_penjualan:
            writer.writerow(transaksi)
    print("Laporan daftar_penjualan berhasil diekspor ke 'Laporan_daftar_penjualan.csv'.")

def tampilkan_menu():
    while true:
    print("\n=== Sistem Inventaris ===")
    print("1. Tambah stok")
    print("2. Kurangi stok")
    print("3. Peringatan stok Rendah")
    print("4. Hitung Total Nilai Barang")
    print("5. Catat Penjualan")
    print("6. Ekspor Data Penjualan")
    print("7. Keluar")

    pilihan = input("Pilih opsi (1-7): ")

    if pilihan == '1':

        nama_produk = input("Masukkan nama produk: ")
        jumlah = int(input("Masukkan jumlah yang ingin ditambah: "))
        tambah_persediaan(nama_produk, jumlah)
    elif pilihan == '2':
        nama_produk = input("Masukkan nama produk: ")
        jumlah = int(input("Masukkan jumlah yang ingin dikurangi: "))
        kurangi_persediaan(nama_produk, jumlah)
    elif pilihan == '3':
        cek_persediaan_minimum()
    elif pilihan == '4':
        hitung_total_nilai()
    elif pilihan == '5':
        nama_produk = input("Masukkan nama produk yang terjual: ")
        jumlah = int(input("Masukkan jumlah yang terjual: "))
        catat_daftar_penjualan(nama_produk, jumlah)
    elif pilihan == '6':
        simpan_laporan_penjualan()
    elif pilihan == '7':
        print("Sukur moanto ! program telah selesai.")
        break
    else:
        print("Pilihan tidak valid.")
